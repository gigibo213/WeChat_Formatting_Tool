app:
  description: è¾…åŠ©å¾®ä¿¡å…¬ä¼—å·æ–‡å­—æ’ç‰ˆ
  icon: ğŸ¤–
  icon_background: '#FFEAD5'
  mode: workflow
  name: å¾®ä¿¡å…¬ä¼—å·æ’ç‰ˆå·¥å…·
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/deepseek:0.0.5@fd6efd37c2a931911de8ab9ca3ba2da303bef146d45ee87ad896b04b36d09403
- current_identifier: null
  type: package
  value:
    plugin_unique_identifier: xc/easywechat:0.0.1@53b87fde53b5ae104772c449f881ba77e2a1ccab730aa0b70f43d30ece634c47
kind: app
version: 0.3.0
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: start
        targetType: tool
      id: 1748444773714-source-1748501091970-target
      source: '1748444773714'
      sourceHandle: source
      target: '1748501091970'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: tool
        targetType: code
      id: 1748501091970-source-1748501610726-target
      source: '1748501091970'
      sourceHandle: source
      target: '1748501610726'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: tool
        targetType: end
      id: 1748502728636-source-1748444853887-target
      source: '1748502728636'
      sourceHandle: source
      target: '1748444853887'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: llm
      id: 1748501610726-source-1748541777151-target
      source: '1748501610726'
      sourceHandle: source
      target: '1748541777151'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: code
      id: 1748541777151-source-1748542435035-target
      source: '1748541777151'
      sourceHandle: source
      target: '1748542435035'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: tool
      id: 1748542435035-source-1748502728636-target
      source: '1748542435035'
      sourceHandle: source
      target: '1748502728636'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: start
        targetType: code
      id: 1748444773714-source-1750705769535-target
      source: '1748444773714'
      sourceHandle: source
      target: '1750705769535'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: code
      id: 1750705769535-source-1750706006149-target
      source: '1750705769535'
      sourceHandle: source
      target: '1750706006149'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: tool
      id: 1750706006149-source-1748502728636-target
      source: '1750706006149'
      sourceHandle: source
      target: '1748502728636'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: ''
        selected: true
        title: å¼€å§‹
        type: start
        variables:
        - label: APPID
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: APPID
        - label: APPSECRET
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: APPSECRET
        - label: æ–‡ç« æ ‡é¢˜
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: title
        - label: éœ€è¦æ’ç‰ˆçš„å†…å®¹
          max_length: 100000
          options: []
          required: true
          type: paragraph
          variable: content
        - label: ä½œè€…åå­—
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: author
        - label: æ‘˜è¦
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: digest
        - label: æ’ç‰ˆè¦æ±‚
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: prompt
      height: 245
      id: '1748444773714'
      position:
        x: 63.463198789092985
        y: 309.7139541625647
      positionAbsolute:
        x: 63.463198789092985
        y: 309.7139541625647
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1748501610726'
          - result
          variable: result
        selected: false
        title: ç»“æŸ
        type: end
      height: 89
      id: '1748444853887'
      position:
        x: 2684.0768772741358
        y: 309.7139541625647
      positionAbsolute:
        x: 2684.0768772741358
        y: 309.7139541625647
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        desc: ''
        is_team_authorization: true
        output_schema: null
        paramSchemas:
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: WeChat official account AppID
            ja_JP: WeChat official account AppID
            pt_BR: WeChat official account AppID
            zh_Hans: å¾®ä¿¡å…¬ä¼—å·AppID
          label:
            en_US: WeChat AppID
            ja_JP: WeChat AppID
            pt_BR: WeChat AppID
            zh_Hans: å¾®ä¿¡AppID
          llm_description: WeChat official account AppID, used to identify the application
          max: null
          min: null
          name: appid
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: WeChat official account AppSecret
            ja_JP: WeChat official account AppSecret
            pt_BR: WeChat official account AppSecret
            zh_Hans: å¾®ä¿¡å…¬ä¼—å·AppSecret
          label:
            en_US: WeChat AppSecret
            ja_JP: WeChat AppSecret
            pt_BR: WeChat AppSecret
            zh_Hans: å¾®ä¿¡AppSecret
          llm_description: WeChat official account AppSecret, used for authentication
          max: null
          min: null
          name: appsecret
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: string
        params:
          appid: ''
          appsecret: ''
        provider_id: xc/easywechat/easywechat
        provider_name: xc/easywechat/easywechat
        provider_type: builtin
        selected: false
        title: è·å–å¾®ä¿¡è®¿é—®ä»¤ç‰Œ
        tool_configurations: {}
        tool_description: ä½¿ç”¨appidå’Œappsecretè·å–å¾®ä¿¡è®¿é—®ä»¤ç‰Œ (æ— ç¼“å­˜)
        tool_label: è·å–å¾®ä¿¡è®¿é—®ä»¤ç‰Œ
        tool_name: get_access_token
        tool_parameters:
          appid:
            type: mixed
            value: '{{#1748444773714.APPID#}}'
          appsecret:
            type: mixed
            value: '{{#1748444773714.APPSECRET#}}'
        type: tool
      height: 53
      id: '1748501091970'
      position:
        x: 488.4901820433115
        y: 309.7139541625647
      positionAbsolute:
        x: 488.4901820433115
        y: 309.7139541625647
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        code: "def main(arg1: str) -> dict:\n    # ç›´æ¥ä»æ•°ç»„ä¸­å–ç¬¬ä¸€ä¸ªå…ƒç´ çš„ access_token å­—æ®µ\n\
          \    access_token = arg1[0][\"access_token\"]\n    \n    return {\n    \
          \    \"result\": access_token\n    }"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: æå–access_token
        type: code
        variables:
        - value_selector:
          - '1748501091970'
          - json
          variable: arg1
      height: 53
      id: '1748501610726'
      position:
        x: 861.485366556568
        y: 309.7139541625647
      positionAbsolute:
        x: 861.485366556568
        y: 309.7139541625647
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        desc: ''
        is_team_authorization: true
        output_schema: null
        paramSchemas:
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: WeChat access token obtained from get_access_token tool
            ja_JP: WeChat access token obtained from get_access_token tool
            pt_BR: WeChat access token obtained from get_access_token tool
            zh_Hans: ä»get_access_tokenå·¥å…·è·å–çš„å¾®ä¿¡è®¿é—®ä»¤ç‰Œ
          label:
            en_US: Access Token
            ja_JP: Access Token
            pt_BR: Access Token
            zh_Hans: è®¿é—®ä»¤ç‰Œ
          llm_description: WeChat access token for API authentication
          max: null
          min: null
          name: access_token
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Title of the article draft
            ja_JP: Title of the article draft
            pt_BR: Title of the article draft
            zh_Hans: æ–‡ç« è‰ç¨¿çš„æ ‡é¢˜
          label:
            en_US: Article Title
            ja_JP: Article Title
            pt_BR: Article Title
            zh_Hans: æ–‡ç« æ ‡é¢˜
          llm_description: Title of the WeChat article draft
          max: null
          min: null
          name: title
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: HTML content of the article draft
            ja_JP: HTML content of the article draft
            pt_BR: HTML content of the article draft
            zh_Hans: æ–‡ç« è‰ç¨¿çš„HTMLå†…å®¹
          label:
            en_US: Article Content
            ja_JP: Article Content
            pt_BR: Article Content
            zh_Hans: æ–‡ç« å†…å®¹
          llm_description: HTML content of the WeChat article draft, supports HTML
            tags
          max: null
          min: null
          name: content
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Author of the article (optional)
            ja_JP: Author of the article (optional)
            pt_BR: Author of the article (optional)
            zh_Hans: æ–‡ç« ä½œè€…ï¼ˆå¯é€‰ï¼‰
          label:
            en_US: Author
            ja_JP: Author
            pt_BR: Author
            zh_Hans: ä½œè€…
          llm_description: Author name of the article draft
          max: null
          min: null
          name: author
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Summary/digest of the article (optional, auto-generated if not
              provided)
            ja_JP: Summary/digest of the article (optional, auto-generated if not
              provided)
            pt_BR: Summary/digest of the article (optional, auto-generated if not
              provided)
            zh_Hans: æ–‡ç« æ‘˜è¦ï¼ˆå¯é€‰ï¼Œå¦‚ä¸æä¾›åˆ™è‡ªåŠ¨ç”Ÿæˆï¼‰
          label:
            en_US: Article Digest
            ja_JP: Article Digest
            pt_BR: Article Digest
            zh_Hans: æ–‡ç« æ‘˜è¦
          llm_description: Summary or digest of the article content
          max: null
          min: null
          name: digest
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Media ID of the cover image obtained from upload_permanent_media
              tool
            ja_JP: Media ID of the cover image obtained from upload_permanent_media
              tool
            pt_BR: Media ID of the cover image obtained from upload_permanent_media
              tool
            zh_Hans: ä»upload_permanent_mediaå·¥å…·è·å–çš„å°é¢å›¾ç‰‡åª’ä½“ID
          label:
            en_US: Cover Image Media ID
            ja_JP: Cover Image Media ID
            pt_BR: Cover Image Media ID
            zh_Hans: å°é¢å›¾ç‰‡åª’ä½“ID
          llm_description: Media ID of the cover image for the article draft
          max: null
          min: null
          name: thumb_media_id
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: string
        params:
          access_token: ''
          author: ''
          content: ''
          digest: ''
          thumb_media_id: ''
          title: ''
        provider_id: xc/easywechat/easywechat
        provider_name: xc/easywechat/easywechat
        provider_type: builtin
        selected: false
        title: åˆ›å»ºå¾®ä¿¡è‰ç¨¿
        tool_configurations: {}
        tool_description: ä½¿ç”¨æ ‡é¢˜ã€å†…å®¹ã€ä½œè€…ã€æ‘˜è¦å’Œå°é¢å›¾ç‰‡åˆ›å»ºå¾®ä¿¡æ–‡ç« è‰ç¨¿
        tool_label: åˆ›å»ºå¾®ä¿¡è‰ç¨¿
        tool_name: create_draft
        tool_parameters:
          access_token:
            type: mixed
            value: '{{#1748501610726.result#}}'
          author:
            type: mixed
            value: '{{#1748444773714.author#}}'
          content:
            type: mixed
            value: '{{#1748541777151.text#}}'
          digest:
            type: mixed
            value: '{{#1748444773714.digest#}}'
          thumb_media_id:
            type: mixed
            value: '{{#1750706006149.result#}}'
          title:
            type: mixed
            value: '{{#1748444773714.title#}}'
        type: tool
      height: 53
      id: '1748502728636'
      position:
        x: 2299.4081480859913
        y: 309.7139541625647
      positionAbsolute:
        x: 2299.4081480859913
        y: 309.7139541625647
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: deepseek-chat
          provider: langgenius/deepseek/deepseek
        prompt_template:
        - id: a919e828-6593-4081-818a-de235a3b9617
          role: system
          text: "\n# è§’è‰²è®¾å®š\n\nä½ æ˜¯ä¸€åä¸“ä¸šä¸”å¯Œæœ‰åˆ›æ„çš„å¾®ä¿¡å…¬ä¼—å·æ’ç‰ˆå·¥ç¨‹å¸ˆï¼Œç²¾é€šå¾®ä¿¡HTMLå†…å®¹å®‰å…¨ç­–ç•¥å’Œç§»åŠ¨ç«¯é€‚é…è§„èŒƒã€‚èƒ½å¤Ÿæ ¹æ®ç”¨æˆ·æä¾›çš„æ–‡ç« å†…å®¹ä¸æ’ç‰ˆè¦æ±‚ï¼Œå°½å¯èƒ½å®Œæ•´ä¸”é«˜è´¨é‡åœ°è‡ªåŠ¨è®¾è®¡å‡ºåˆé€‚çš„æ’ç‰ˆé£æ ¼ï¼Œå¹¶ç”Ÿæˆç¬¦åˆè¦æ±‚çš„å¾®ä¿¡å…¬ä¼—å·æ’ç‰ˆHTMLä»£ç ã€‚åœ¨å¤„ç†è¿‡ç¨‹ä¸­ï¼Œè¦ä¿è¯åŸå§‹è¾“å…¥å†…å®¹ä¿¡æ¯çš„å®Œæ•´æ€§ï¼Œä¸å¾—éšæ„ç¼©å‡å†…å®¹ã€‚\n\
            \n\n\n## æ ¸å¿ƒè¦æ±‚\n1. âœ… åŸºæœ¬åŸåˆ™\nä¸æ”¯æŒä»»ä½•è„šæœ¬ã€è¡¨å•ã€åŠ¨ç”»ã€åµŒå…¥å¤–éƒ¨èµ„æºç­‰äº¤äº’æ€§å†…å®¹ã€‚\næ‰€æœ‰æ ·å¼å¿…é¡»ä½¿ç”¨å†…è” style\
            \ å±æ€§ç¼–å†™ ï¼Œä¸æ”¯æŒ <style> æˆ–å¤–éƒ¨ CSS æ–‡ä»¶ã€‚\nä½¿ç”¨æ ‡å‡†æ–‡æ¡£æµå¸ƒå±€ï¼Œé¿å…æµ®åŠ¨ã€å®šä½ç­‰å¤æ‚ç»“æ„ã€‚\nå›¾ç‰‡æ¨èä½¿ç”¨å¾®ä¿¡ç´ æåº“ä¸­çš„é“¾æ¥ï¼Œç¡®ä¿åŠ è½½ç¨³å®šã€‚\n\
            2. \U0001F9F1 æ’ç‰ˆè§„èŒƒ\næ®µè½ç»“æ„\nä½¿ç”¨ <p> è¡¨ç¤ºæ­£æ–‡æ®µè½ï¼Œ<h1> åˆ° <h6> è¡¨ç¤ºæ ‡é¢˜å±‚çº§ã€‚å¤šä¸ªæ®µè½ä¹‹é—´å»ºè®®æ·»åŠ \
            \ margin-bottom é—´è·ï¼Œæå‡é˜…è¯»ä½“éªŒã€‚é¿å…ä½¿ç”¨ <div> è¿›è¡Œå¸ƒå±€ï¼Œæ¨èä½¿ç”¨ <p> åŒ…è£¹å†…å®¹ã€‚\næ–‡å­—å¼ºè°ƒ\nåŠ ç²—ä½¿ç”¨ <strong>\
            \ æˆ– <b>ï¼Œæ–œä½“ä½¿ç”¨ <em> æˆ– <i>ï¼Œä¸‹åˆ’çº¿ä½¿ç”¨ <u>ï¼Œæ¢è¡Œä½¿ç”¨ <br>ã€‚\nåˆ—è¡¨å±•ç¤º\næ— åºåˆ—è¡¨ä½¿ç”¨ <ul><li>...</li></ul>ï¼Œæœ‰åºåˆ—è¡¨ä½¿ç”¨\
            \ <ol><li>...</li></ol>ã€‚\nå¤šåª’ä½“æ’å…¥\nä½¿ç”¨å¾®ä¿¡ä¸“å±æ ‡ç­¾ï¼š\néŸ³é¢‘ï¼š<mpvoice>ï¼ˆéœ€é…ç½® voice_idï¼‰\n\
            è§†é¢‘ï¼š<mpvideo>ï¼ˆéœ€é…ç½® vidï¼‰\n3. \U0001F3A8 æ ·å¼ç¼–å†™è§„åˆ™ï¼ˆä»…é™å†…è”ï¼‰\nå­—ä½“ä¸é¢œè‰²\nfont-size: è®¾ç½®å­—ä½“å¤§å°ï¼ˆæ¨è\
            \ px æˆ– vwï¼‰\ncolor: è®¾ç½®æ–‡å­—é¢œè‰²\nfont-weight: æ§åˆ¶åŠ ç²—ç¨‹åº¦ï¼ˆå¦‚ 400ã€700ï¼‰\nfont-style:\
            \ æ§åˆ¶æ–œä½“\ntext-decoration: æ§åˆ¶ä¸‹åˆ’çº¿ã€åˆ é™¤çº¿ç­‰\nå¯¹é½ä¸é—´è·\ntext-align: æ§åˆ¶æ–‡æœ¬å¯¹é½æ–¹å¼ï¼ˆleft\
            \ / center / rightï¼‰\nmargin: æ§åˆ¶å…ƒç´ ä¸Šä¸‹è¾¹è·\npadding: æ§åˆ¶å†…è¾¹è·ï¼ˆæ…ç”¨ï¼‰\nline-height:\
            \ æ§åˆ¶è¡Œé«˜ï¼Œæå‡å¯è¯»æ€§ï¼ˆæ¨è 1.5~1.8ï¼‰\nletter-spacing: æ§åˆ¶å­—é—´è·ï¼ˆé€‚åˆè‹±æ–‡/æ•°å­—æ ‡é¢˜ï¼‰\nèƒŒæ™¯ä¸è¾¹æ¡†\nbackground-color:\
            \ è®¾ç½®èƒŒæ™¯è‰²\nborder: è®¾ç½®è¾¹æ¡†æ ·å¼\nborder-radius: åœ†è§’æ•ˆæœ\nbox-shadow: æ·»åŠ é˜´å½±æ•ˆæœ\nå…¶ä»–è§†è§‰å±æ€§\n\
            opacity: è®¾ç½®é€æ˜åº¦\npointer-events: none: ç¦ç”¨ç‚¹å‡»äº‹ä»¶ï¼ˆç”¨äºè£…é¥°æ€§å…ƒç´ ï¼‰\n4. âš ï¸ æ ‡ç­¾é»‘åå•ï¼ˆç¦æ­¢ä½¿ç”¨ï¼‰\n\
            ä»¥ä¸‹æ ‡ç­¾å°†è¢«å¾®ä¿¡å…¬ä¼—å¹³å°è¿‡æ»¤æˆ–ç§»é™¤ï¼š\n<script>, <iframe>, <form>, <input>, <textarea>, <select>,\
            \ <option>,\n<object>, <embed>, <canvas>, <svg>, <style>, <link>, <meta>,\
            \ <base>\n5. âŒ æ ·å¼å±æ€§é»‘åå•ï¼ˆç¦æ­¢ä½¿ç”¨ï¼‰\nä»¥ä¸‹ CSS å±æ€§å°†è¢«å¿½ç•¥æˆ–ç§»é™¤ï¼š\nposition, z-index, float,\
            \ transform, transition,\nanimation, keyframes, hoverä¼ªç±», mediaæŸ¥è¯¢,\nç™¾åˆ†æ¯”é«˜åº¦/ä½ç§»å€¼ï¼ˆéƒ¨åˆ†å¤±æ•ˆï¼‰ï¼Œidå±æ€§\n\
            6. âœ… æ­£ç¡®è¾“å‡ºç¤ºä¾‹ï¼ˆOutputï¼‰\nâ€‹<h2 style=\"font-size:22px; color:#2c3e50; text-align:center;\
            \ margin:1.5em 0;\">\n  IPOå¸‚åœºæ‹¥æŒ¤ï¼Œâ€œç¥ä»™å¦–é­”â€å‡‘çƒ­é—¹ã€‚\n</h2>\n\n<p style=\"font-size:16px;\
            \ color:#333; line-height:1.75; margin-bottom:1em;\">\n  æŠ•èµ„å®¶ç½‘è·æ‚‰ï¼Œè¿‘æ—¥åˆ›æŠ•åœˆä¼ æ¥ç‚¸è£‚æ¶ˆæ¯ï¼Œåˆ›ä¸š9å¹´çš„å®¶è£…ç•Œ<strong>â€œé¡¶æµâ€</strong>ã€æ˜æ˜Ÿå…¬å¸ä½èŒƒå„¿é™·å…¥åœæ‘†ã€èµ„é‡‘é“¾æ–­è£‚å±æœºã€‚\n\
            </p>\n\n<p style=\"text-align:center; margin:1.5em 0;\">\n  <img src=\"\
            https://example.com/image.jpg\"  alt=\"ä½èŒƒå„¿åŠå…¬ç¯å¢ƒ\"\n       style=\"max-width:100%;\
            \ border-radius:8px; box-shadow:0 4px 6px rgba(0,0,0,0.1);\">\n</p>\n\
            7. âœ… æ­£ç¡®è¾“å‡ºæ•ˆæœï¼ˆOutputï¼‰\nä¸»æ ‡é¢˜å±…ä¸­æ˜¾ç¤ºï¼Œå­—å·è¾ƒå¤§ï¼Œé¢œè‰²æ·±ç°ï¼›\næ­£æ–‡æ®µè½æ¸…æ™°æ˜“è¯»ï¼Œè¡Œé«˜é€‚ä¸­ï¼Œæ®µè½é—´ç•™ç™½ï¼›\nå›¾ç‰‡è‡ªåŠ¨é€‚åº”å±å¹•å®½åº¦ï¼Œåœ†è§’+é˜´å½±ç¾åŒ–ï¼›\n\
            å…³é”®è¯åŠ ç²—çªå‡ºï¼Œå¢å¼ºä¿¡æ¯å±‚æ¬¡æ„Ÿï¼›\næ•´ä½“æ’ç‰ˆæ•´æ´ï¼Œç¬¦åˆç§»åŠ¨ç«¯é˜…è¯»ä¹ æƒ¯ã€‚"
        - id: 50dde0f8-b8b7-4c49-8b30-03b33e2c2007
          role: user
          text: 'è¯·æ’ç‰ˆä»¥ä¸‹å†…å®¹

            ===

            {{#1748444773714.content#}}

            ===

            ç”¨æˆ·è¦æ±‚ï¼š

            ===

            {{#1748444773714.prompt#}}

            ==='
        selected: false
        title: LLM
        type: llm
        variables: []
        vision:
          enabled: false
      height: 89
      id: '1748541777151'
      position:
        x: 1276.6939123841125
        y: 309.7139541625647
      positionAbsolute:
        x: 1276.6939123841125
        y: 309.7139541625647
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        code: "import re\n\ndef main(args: str) -> dict:\n    raw_input_str = args.strip()\n\
          \n    # Step 1: Extract the raw HTML string.\n    # First, try to extract\
          \ from a JSON-like \"html\" field using regex.\n    html_field_pattern =\
          \ r'\"html\"\\s*:\\s*\"((?:[^\"\\\\]|\\\\.|\\n)*?)\"'\n    html_match =\
          \ re.search(html_field_pattern, raw_input_str, re.DOTALL)\n\n    source_html_for_section_extraction\
          \ = \"\"\n    if html_match:\n        html_escaped_from_json = html_match.group(1)\n\
          \        # Unescape essential characters: \\\" becomes \", \\\\ becomes\
          \ \\.\n        # Literal \"\\\\n\" sequences from the JSON string are kept\
          \ as \"\\\\n\" at this stage.\n        # Actual newlines '\\n' within the\
          \ JSON string value are also preserved.\n        source_html_for_section_extraction\
          \ = html_escaped_from_json.replace('\\\\\"', '\"').replace('\\\\\\\\', '\\\
          \\')\n    else:\n        # If the \"html\" field pattern isn't found, assume\
          \ raw_input_str is the HTML content itself.\n        # This makes the function\
          \ flexible.\n        source_html_for_section_extraction = raw_input_str\n\
          \n    # If no content after potential extraction, return empty.\n    if\
          \ not source_html_for_section_extraction.strip():\n        return {\"html\"\
          : \"\"}\n\n    # Step 2: Apply the new HTML extraction logic.\n    # Find\
          \ content between the *first* occurrence of \"<section style...\"\n    #\
          \ and the *last* occurrence of \"</section>\".\n    # The regex uses a greedy\
          \ `(.*)` to achieve this.\n    # `re.IGNORECASE` for tag matching, `re.DOTALL`\
          \ for `.` to match newlines.\n    section_content_pattern = r\"<section\
          \ style[^>]*>(.*)</section>\"\n    section_match = re.search(section_content_pattern,\
          \ source_html_for_section_extraction, re.DOTALL | re.IGNORECASE)\n\n   \
          \ if not section_match:\n        # If the section pattern doesn't match,\
          \ return empty.\n        return {\"html\": \"\"}\n\n    # This is the content\
          \ between the outermost section tags matching the criteria.\n    extracted_section_content\
          \ = section_match.group(1)\n\n    # Step 3: Remove all literal \"\\\\n\"\
          \ sequences from the extracted content.\n    # This is based on the user's\
          \ specific instruction: \"ç”¨\\\\nåŒ¹é…ï¼Œåˆ å»æ‰€æœ‰\\\\n\".\n    # This means if the\
          \ string contains the two characters '\\' and 'n', they are removed.\n \
          \   # Actual newline characters ('\\n') are NOT affected by this replacement.\n\
          \    final_html_output = extracted_section_content.replace(\"\\\\n\", \"\
          \")\n    final_html_output = final_html_output.replace(\"\\\\\\\"\", \"\"\
          )\n    final_html_output = final_html_output.replace(\"\\\\\", \"\")\n\n\
          \    return {\"html\": final_html_output}"
        code_language: python3
        desc: ''
        outputs:
          html:
            children: null
            type: string
        selected: false
        title: æå–htmlå†…å®¹
        type: code
        variables:
        - value_selector:
          - '1748541777151'
          - text
          variable: args
      height: 53
      id: '1748542435035'
      position:
        x: 1649.266847476622
        y: 309.7139541625647
      positionAbsolute:
        x: 1649.266847476622
        y: 309.7139541625647
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        code: "import requests\nimport json\nfrom typing import Dict, Any\n\ndef main(APPID:\
          \ str, APPSECRET: str) -> Dict[str, Any]:\n    \"\"\"\n    é€šè¿‡ AppID å’Œ AppSecret\
          \ è·å–ç¬¬ä¸€ä¸ªå›¾ç‰‡ç´ æçš„ media_idã€‚\n\n    è¯¥å‡½æ•°åŒ…å«ä¸¤ä¸ªä¸»è¦æ­¥éª¤ï¼š\n    1. ä½¿ç”¨ AppID å’Œ AppSecret\
          \ è·å– access_tokenã€‚\n    2. ä½¿ç”¨ access_token è·å–ç´ æåˆ—è¡¨ï¼ˆç±»å‹=image, åç§»=0, æ•°é‡=1ï¼‰ã€‚\n\
          \n    :param APPID: å…¬ä¼—å·çš„ AppID\n    :param APPSECRET: å…¬ä¼—å·çš„ AppSecret\n \
          \   :return: ä¸€ä¸ªåŒ…å« API è°ƒç”¨ç»“æœçš„å­—å…¸ã€‚\n             å¦‚æœæˆåŠŸï¼Œ'result' é”®å°†åŒ…å«ç´ æä¿¡æ¯çš„ JSON\
          \ å¯¹è±¡ã€‚\n             å¦‚æœå¤±è´¥ï¼Œ'result' é”®å°†åŒ…å«é”™è¯¯ä¿¡æ¯ã€‚\n    \"\"\"\n    access_token\
          \ = None\n    \n    # æ­¥éª¤ 1: è·å– access_token\n    token_url = \"https://api.weixin.qq.com/cgi-bin/token\"\
          \n    token_params = {\n        \"grant_type\": \"client_credential\",\n\
          \        \"appid\": APPID,\n        \"secret\": APPSECRET\n    }\n    try:\n\
          \        response = requests.get(token_url, params=token_params, timeout=10)\n\
          \        response.raise_for_status()  # æ£€æŸ¥HTTPé”™è¯¯\n        data = response.json()\n\
          \        if \"access_token\" in data:\n            access_token = data[\"\
          access_token\"]\n        else:\n            # å¦‚æœè·å–tokenå¤±è´¥ï¼Œç›´æ¥è¿”å›é”™è¯¯ä¿¡æ¯\n   \
          \         return {'result': data}\n    except requests.exceptions.RequestException\
          \ as e:\n        return {'result': {'error': 'RequestException', 'message':\
          \ f\"è¯·æ±‚ access_token æ—¶å‘ç”Ÿç½‘ç»œé”™è¯¯: {e}\"}}\n    except json.JSONDecodeError:\n\
          \        return {'result': {'error': 'JSONDecodeError', 'message': \"è§£æ\
          \ access_token å“åº”æ—¶å‘ç”ŸJSONé”™è¯¯ã€‚\"}}\n\n    # æ­¥éª¤ 2: å¦‚æœæˆåŠŸè·å– access_tokenï¼Œåˆ™è·å–ç´ æåˆ—è¡¨\n\
          \    if access_token:\n        material_api_url = f\"https://api.weixin.qq.com/cgi-bin/material/batchget_material?access_token={access_token}\"\
          \n        payload = {\n            \"type\": \"image\",\n            \"\
          offset\": 0,\n            \"count\": 1\n        }\n        try:\n      \
          \      response = requests.post(material_api_url, json=payload, timeout=30)\n\
          \            response.raise_for_status()\n            material_data = response.json()\n\
          \            return {'result': material_data}\n        except requests.exceptions.RequestException\
          \ as e:\n            return {'result': {'error': 'RequestException', 'message':\
          \ f\"è¯·æ±‚ç´ æåˆ—è¡¨æ—¶å‘ç”Ÿç½‘ç»œé”™è¯¯: {e}\"}}\n        except json.JSONDecodeError:\n    \
          \        return {'result': {'error': 'JSONDecodeError', 'message': \"è§£æç´ æåˆ—è¡¨å“åº”æ—¶å‘ç”ŸJSONé”™è¯¯ã€‚\"\
          }}\n\n    # å¦‚æœ access_token æœªèƒ½è·å–ï¼ˆç†è®ºä¸Šä¸ä¼šæ‰§è¡Œåˆ°è¿™é‡Œï¼Œå› ä¸ºå‰é¢å·²ç»è¿”å›ï¼‰\n    return {'result':\
          \ {'error': 'UnknownError', 'message': 'æœªèƒ½è·å– access_tokenï¼Œæ— æ³•ç»§ç»­ã€‚'}}\n\n#\
          \ --- ä½¿ç”¨ç¤ºä¾‹ ---\n# if __name__ == '__main__':\n#     # !!é‡è¦!! è¯·æ›¿æ¢ä¸ºä½ è‡ªå·±çš„ AppID\
          \ å’Œ AppSecret\n#     MY_APP_ID = \"YOUR_APP_ID\"\n#     MY_APP_SECRET =\
          \ \"YOUR_APP_SECRET\"\n#\n#     if MY_APP_ID == \"YOUR_APP_ID\" or MY_APP_SECRET\
          \ == \"YOUR_APP_SECRET\":\n#         print(\"è¯·è®¾ç½®ä½ çš„ AppID å’Œ AppSecret\")\n\
          #     else:\n#         response_data = main(MY_APP_ID, MY_APP_SECRET)\n\
          #         print(json.dumps(response_data, indent=4, ensure_ascii=False))\n\
          #\n#         # å¦‚ä½•ä»è¿”å›ç»“æœä¸­æå– media_id\n#         if 'result' in response_data\
          \ and 'item' in response_data['result'] and response_data['result']['item_count']\
          \ > 0:\n#             media_id = response_data['result']['item'][0].get('media_id')\n\
          #             print(f\"\\næˆåŠŸæå–åˆ° Media ID: {media_id}\")\n#         else:\n\
          #             print(\"\\næœªèƒ½è·å–åˆ° media_idã€‚è¯·æ£€æŸ¥ä¸Šé¢çš„è¿”å›ç»“æœã€‚\")"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: object
        selected: false
        title: è·å–mediaID
        type: code
        variables:
        - value_selector:
          - '1748444773714'
          - APPID
          variable: APPID
        - value_selector:
          - '1748444773714'
          - APPSECRET
          variable: APPSECRET
      height: 53
      id: '1750705769535'
      position:
        x: 1058.114479546322
        y: 659.8160161773427
      positionAbsolute:
        x: 1058.114479546322
        y: 659.8160161773427
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        code: "import re\nimport json\nfrom typing import Dict, Any\n\ndef main(response_data:\
          \ Dict[str, Any]) -> dict:\n    \"\"\"\n    ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æš´åŠ›æå– media_idã€‚\n\n  \
          \  æ­¤å‡½æ•°å°†è¾“å…¥çš„å­—å…¸è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œç„¶åä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æŸ¥æ‰¾å¹¶æå–\n    ç¬¬ä¸€ä¸ªå‡ºç°çš„ \"media_id\" å­—æ®µçš„å€¼ã€‚\n\n   \
          \ :param response_data: åŒ…å«ç´ æåˆ—è¡¨ä¿¡æ¯çš„è¾“å…¥å­—å…¸ã€‚\n    :return: ä¸€ä¸ªä¸¥æ ¼éµå¾ª {'result': <string>}\
          \ æ ¼å¼çš„å­—å…¸ã€‚\n             æˆåŠŸæ—¶å€¼ä¸º media_idï¼Œå¤±è´¥æ—¶å€¼ä¸ºç©ºå­—ç¬¦ä¸²ã€‚\n    \"\"\"\n    media_id\
          \ = ''\n\n    try:\n        # 1. å°†è¾“å…¥çš„å­—å…¸æ•°æ®è½¬æ¢ä¸ºä¸€ä¸ªJSONæ ¼å¼çš„å­—ç¬¦ä¸²\n        input_string\
          \ = json.dumps(response_data, ensure_ascii=False)\n\n        # 2. å®šä¹‰æ­£åˆ™è¡¨è¾¾å¼ï¼Œç”¨äºåŒ¹é…\
          \ \"media_id\":\"<å†…å®¹>\" çš„æ¨¡å¼\n        #    - \"media_id\"\\s*:\\s* åŒ¹é… \"\
          media_id\" å’Œå®ƒå‰åçš„å†’å·ã€ç©ºæ ¼\n        #    - \"([^\"]+)\"          åŒ¹é…å¹¶æ•è·åŒå¼•å·ä¹‹é—´çš„ã€ä¸å«åŒå¼•å·çš„ä»»æ„å†…å®¹\n\
          \        pattern = r'\"media_id\"\\s*:\\s*\"([^\"]+)\"'\n\n        # 3.\
          \ åœ¨å­—ç¬¦ä¸²ä¸­æœç´¢ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹\n        match = re.search(pattern, input_string)\n\n  \
          \      # 4. å¦‚æœæœç´¢æˆåŠŸ (matchå¯¹è±¡ä¸ä¸ºNone)ï¼Œåˆ™æå–æ•è·ç»„çš„å†…å®¹\n        if match:\n      \
          \      media_id = match.group(1)\n\n    except Exception:\n        # å¦‚æœåœ¨è½¬æ¢æˆ–åŒ¹é…è¿‡ç¨‹ä¸­å‡ºç°ä»»ä½•å¼‚å¸¸ï¼Œå‡½æ•°å°†é™é»˜å¤±è´¥ï¼Œ\n\
          \        # å¹¶æœ€ç»ˆè¿”å›é»˜è®¤çš„ç©ºå­—ç¬¦ä¸²ã€‚\n        pass\n\n    # 5. æ€»æ˜¯è¿”å›å¹³å°è¦æ±‚çš„å›ºå®šæ ¼å¼\n    return\
          \ {\n        'result': media_id\n    }"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: è§£æresponse
        type: code
        variables:
        - value_selector:
          - '1750705769535'
          - result
          variable: response_data
      height: 53
      id: '1750706006149'
      position:
        x: 1506.9397396946424
        y: 659.8160161773427
      positionAbsolute:
        x: 1506.9397396946424
        y: 659.8160161773427
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    viewport:
      x: -494.2376718071531
      y: -29.045995597503406
      zoom: 0.666861779100301
